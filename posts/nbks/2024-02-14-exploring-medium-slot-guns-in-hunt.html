<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-02-14">
<meta name="description" content="Just Some Fun Data Analysis, Take Two">

<title>Orgulo.us - Exploring Hunt Showdown’s Medium Slot Guns</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../Logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Orgulo.us</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Shoklan"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Exploring Hunt Showdown’s Medium Slot Guns</h1>
                  <div>
        <div class="description">
          Just Some Fun Data Analysis, Take Two
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">python</div>
                <div class="quarto-category">data analysis</div>
                <div class="quarto-category">hunt showdown</div>
                <div class="quarto-category">datasets</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 14, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#so-what-about-medium-weapons" id="toc-so-what-about-medium-weapons" class="nav-link active" data-scroll-target="#so-what-about-medium-weapons">So, What About Medium Weapons?</a>
  <ul class="collapse">
  <li><a href="#extracting-the-weapons" id="toc-extracting-the-weapons" class="nav-link" data-scroll-target="#extracting-the-weapons">Extracting the Weapons</a>
  <ul class="collapse">
  <li><a href="#how-much-is-the-average-cost-of-a-medium-sized-gun" id="toc-how-much-is-the-average-cost-of-a-medium-sized-gun" class="nav-link" data-scroll-target="#how-much-is-the-average-cost-of-a-medium-sized-gun">How much is the average cost of a medium sized gun?</a></li>
  <li><a href="#skipping-the-modeling" id="toc-skipping-the-modeling" class="nav-link" data-scroll-target="#skipping-the-modeling">Skipping the Modeling</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="so-what-about-medium-weapons" class="level1">
<h1>So, What About Medium Weapons?</h1>
<p>Picking up where the last post left off, I am going to move on to exploring the Medium slot weapons. This post took quite a bit longer since there was a new Hunt event and I ended up enjoying playing more than writing this. There were some updates as well as new weapons in the category to be added to the data. But, the analysis continues starting with the default imports!</p>
<div id="cell-2" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Don't forget to install openpyxl otherwise you will get an import error.</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># some plot configs I like</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>pal <span class="op">=</span> sns.dark_palette(<span class="st">"seagreen"</span>, n_colors<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">"figure.figsize"</span>] <span class="op">=</span> (<span class="dv">14</span>,<span class="dv">7</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="extracting-the-weapons" class="level2">
<h2 class="anchored" data-anchor-id="extracting-the-weapons">Extracting the Weapons</h2>
<p>Since we’re not interested in the other category of weapons - and I have not finished updating the large weapons yet - the first step is to filter the slot size:</p>
<div id="cell-5" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_excel(dataDirectory<span class="op">/</span>filename, sheet_name<span class="op">=</span><span class="st">'Stats'</span>, na_values<span class="op">=</span><span class="st">'N/a'</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data.assign(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    Slot <span class="op">=</span> data.Slot.astype(<span class="st">'category'</span>),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    Type <span class="op">=</span> data[<span class="st">'Ammo Type'</span>].astype(<span class="st">'category'</span>),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    Addendum <span class="op">=</span> data[<span class="st">'Addendum Bullet'</span>].astype(<span class="st">'bool'</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>).drop(</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'Ammo Type'</span>, <span class="st">'Addendum Bullet'</span>],</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    axis<span class="op">=</span><span class="dv">1</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>mediums <span class="op">=</span> data.query(<span class="st">'Slot == "Medium"'</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># example slice</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>mediums.iloc[<span class="dv">1</span>:<span class="dv">10</span>,<span class="dv">1</span>:<span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Slot</th>
<th data-quarto-table-cell-role="th">Cost</th>
<th data-quarto-table-cell-role="th">Damage</th>
<th data-quarto-table-cell-role="th">Muzzle Velocity</th>
<th data-quarto-table-cell-role="th">Falloff 10m</th>
<th data-quarto-table-cell-role="th">Falloff 25m</th>
<th data-quarto-table-cell-role="th">Falloff 50m</th>
<th data-quarto-table-cell-role="th">Falloff 75m</th>
<th data-quarto-table-cell-role="th">Barrel Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">73</td>
<td>Medium</td>
<td>15.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">74</td>
<td>Medium</td>
<td>57.0</td>
<td>227.0</td>
<td>NaN</td>
<td>150.0</td>
<td>150.0</td>
<td>150.0</td>
<td>76.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75</td>
<td>Medium</td>
<td>440.0</td>
<td>120.0</td>
<td>450.0</td>
<td>120.0</td>
<td>116.0</td>
<td>92.0</td>
<td>70.0</td>
<td>9.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">76</td>
<td>Medium</td>
<td>470.0</td>
<td>120.0</td>
<td>450.0</td>
<td>120.0</td>
<td>116.0</td>
<td>92.0</td>
<td>70.0</td>
<td>9.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">77</td>
<td>Medium</td>
<td>500.0</td>
<td>120.0</td>
<td>315.0</td>
<td>120.0</td>
<td>120.0</td>
<td>104.0</td>
<td>76.0</td>
<td>9.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">78</td>
<td>Medium</td>
<td>505.0</td>
<td>157.0</td>
<td>350.0</td>
<td>150.0</td>
<td>89.0</td>
<td>61.0</td>
<td>55.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">79</td>
<td>Medium</td>
<td>485.0</td>
<td>1.0</td>
<td>75.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">80</td>
<td>Medium</td>
<td>450.0</td>
<td>40.0</td>
<td>75.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">81</td>
<td>Medium</td>
<td>180.0</td>
<td>80.0</td>
<td>400.0</td>
<td>80.0</td>
<td>74.0</td>
<td>41.0</td>
<td>27.0</td>
<td>5.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="how-much-is-the-average-cost-of-a-medium-sized-gun" class="level3">
<h3 class="anchored" data-anchor-id="how-much-is-the-average-cost-of-a-medium-sized-gun">How much is the average cost of a medium sized gun?</h3>
<p>So, let’s get into some simple questions start with the average cost of a medium slot weapon. Like other posts, you can simply ask for the mean and median of the <strong>Cost</strong> column.</p>
<div id="cell-7" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How much is the average cost of the guns?</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ss">f"The mean cost of Medium Slot guns is $</span><span class="sc">{</span><span class="bu">round</span>( mediums.Cost.mean(), <span class="dv">2</span>)<span class="sc">}</span><span class="ss">. The median cost of Medium Slot guns is $</span><span class="sc">{</span><span class="bu">round</span>( mediums.Cost.median(), <span class="dv">2</span>)<span class="sc">}</span><span class="ss">."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>'The mean cost of Medium Slot guns is $172.15. The median cost of Medium Slot guns is $93.5.'</code></pre>
</div>
</div>
<p>Looking at the two numbers, there are some outliers which are pulling the average further upwards.</p>
<div id="cell-9" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I really like violin plots and they've grown on me</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>sns.violinplot(mediums, x<span class="op">=</span><span class="st">'Cost'</span>, color<span class="op">=</span><span class="st">'seagreen'</span>).set_title(<span class="st">"Spread of Medium Gun Costs"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2024-02-14-exploring-medium-slot-guns-in-hunt_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>So, how does this compare to the damage you get from the medium slot guns?</p>
<div id="cell-11" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How much is the average damage per gun?</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ss">f"The Mean Damage of Medium Slot guns is </span><span class="sc">{</span><span class="bu">round</span>( mediums.Damage.mean())<span class="sc">}</span><span class="ss">. The Median Damage of Medium Slot guns is </span><span class="sc">{</span><span class="bu">round</span>( mediums.Damage.median())<span class="sc">}</span><span class="ss">."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>'The Mean Damage of Medium Slot guns is 113. The Median Damage of Medium Slot guns is 110.'</code></pre>
</div>
</div>
<div id="cell-12" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I really like violin plots and they've grown on me</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>sns.violinplot(mediums, x<span class="op">=</span><span class="st">'Damage'</span>, color<span class="op">=</span><span class="st">'seagreen'</span>).set_title(<span class="st">"Spread of Medium Gun Damage"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2024-02-14-exploring-medium-slot-guns-in-hunt_files/figure-html/cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>These two graphs make little sense without understanding Hunt: Showdown. Looking at this, you may ask “<em>Why wouldn’t you just buy a more expensive gun?</em>” And, the answer to this was touched on in the previous post: <em>Fall Off Damage</em>. Different bullet types have different distance falls offs which influence how much damage the bullet actually does. We can see this visually for the Fall off; most weapons are fine at 10m but not at 75m. If you can engage a fellow Hunter under the 50m range then the cheaper guns are just as effective.</p>
<div id="cell-14" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="op">=</span> mediums.melt(id_vars<span class="op">=</span>[<span class="st">'Weapon'</span>, <span class="st">'Type'</span>], value_vars<span class="op">=</span>[<span class="st">'Falloff 75m'</span>, <span class="st">'Falloff 50m'</span>, <span class="st">'Falloff 25m'</span>, <span class="st">'Falloff 10m'</span>], value_name<span class="op">=</span><span class="st">'Falloff'</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>sns.violinplot(tmp, x<span class="op">=</span><span class="st">'variable'</span>, y<span class="op">=</span><span class="st">'Falloff'</span>, palette<span class="op">=</span>pal, hue<span class="op">=</span><span class="st">'variable'</span>, legend<span class="op">=</span><span class="va">False</span>).set_title(<span class="st">"Distribution of Damage Over Distance"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2024-02-14-exploring-medium-slot-guns-in-hunt_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Another reason for the difference is <strong>Muzzle Velocity</strong> again; or, how long it takes for the bullet to reach the target. The faster the bullet then the more it costs. Again, the closer you are to the target then the less the bullet speed matters. And therefore, the cheaper weapons will still handle just fine. But, how do these bullet speeds compare in just this category?</p>
<div id="cell-16" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ss">f"The Mean Muzzle Velocity of Medium Slot guns is </span><span class="sc">{</span><span class="bu">round</span>( mediums[<span class="st">'Muzzle Velocity'</span>].mean())<span class="sc">}</span><span class="ss">. The Median Muzzle Velocity of Medium Slot guns is </span><span class="sc">{</span><span class="bu">round</span>( mediums[<span class="st">'Muzzle Velocity'</span>].median())<span class="sc">}</span><span class="ss">."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>'The Mean Muzzle Velocity of Medium Slot guns is 413. The Median Muzzle Velocity of Medium Slot guns is 410.'</code></pre>
</div>
</div>
<div id="cell-17" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the variability in the muzzle velocity here?</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>sns.histplot(mediums[<span class="st">'Muzzle Velocity'</span>], color<span class="op">=</span><span class="st">'seagreen'</span>).set_title(<span class="st">"Muzzle Velocities for Medium Slot Guns"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2024-02-14-exploring-medium-slot-guns-in-hunt_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>So, what is up with those outliers on both sides? Everything else falls nicely in the middle area?</p>
<div id="cell-19" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>mediums<span class="op">\</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    .loc[ (mediums[<span class="st">'Muzzle Velocity'</span>] <span class="op">&lt;</span> <span class="dv">300</span>) <span class="op">|</span> (mediums[<span class="st">'Muzzle Velocity'</span>] <span class="op">&gt;</span> <span class="dv">600</span>)]<span class="op">\</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    [[<span class="st">'Weapon'</span>, <span class="st">'Type'</span>, <span class="st">'Muzzle Velocity'</span>]]<span class="op">\</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    .style.hide(axis<span class="op">=</span><span class="st">'index'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<style type="text/css">
</style>

<table id="T_2de2e" data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th id="T_2de2e_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Weapon</th>
<th id="T_2de2e_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Type</th>
<th id="T_2de2e_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">Muzzle Velocity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_2de2e_row0_col0" class="data row0 col0">LeMat Mark II UpperMat</td>
<td id="T_2de2e_row0_col1" class="data row0 col1">Starshell</td>
<td id="T_2de2e_row0_col2" class="data row0 col2">75.000000</td>
</tr>
<tr class="even">
<td id="T_2de2e_row1_col0" class="data row1 col0">LeMat Mark II UpperMat</td>
<td id="T_2de2e_row1_col1" class="data row1 col1">Dragon Breath</td>
<td id="T_2de2e_row1_col2" class="data row1 col2">75.000000</td>
</tr>
<tr class="odd">
<td id="T_2de2e_row2_col0" class="data row2 col0">Mosin-Nagant N1891 Obrez</td>
<td id="T_2de2e_row2_col1" class="data row2 col1">Spitzer</td>
<td id="T_2de2e_row2_col2" class="data row2 col2">740.000000</td>
</tr>
<tr class="even">
<td id="T_2de2e_row3_col0" class="data row3 col0">Mosin-Nagant N1891 Obrez Drum</td>
<td id="T_2de2e_row3_col1" class="data row3 col1">Spitzer</td>
<td id="T_2de2e_row3_col2" class="data row3 col2">740.000000</td>
</tr>
<tr class="odd">
<td id="T_2de2e_row4_col0" class="data row4 col0">Scottfield Model 3 Precision</td>
<td id="T_2de2e_row4_col1" class="data row4 col1">Medium</td>
<td id="T_2de2e_row4_col2" class="data row4 col2">280.000000</td>
</tr>
<tr class="even">
<td id="T_2de2e_row5_col0" class="data row5 col0">Scottfield Model 3 Precision</td>
<td id="T_2de2e_row5_col1" class="data row5 col1">Incendiary</td>
<td id="T_2de2e_row5_col2" class="data row5 col2">280.000000</td>
</tr>
<tr class="odd">
<td id="T_2de2e_row6_col0" class="data row6 col0">Scottfield Model 3 Precision</td>
<td id="T_2de2e_row6_col1" class="data row6 col1">Full Metal Jacket</td>
<td id="T_2de2e_row6_col2" class="data row6 col2">250.000000</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Spitzer is a long ammo variant which is <strong>significantly</strong> increases the Muzzle Velocity so that explains the high values. And, the Shotgun shell variants along with the poor Scottfield Model 3 Precision which has one of the worst velocities in the game. And, while we’re bringing up these different ammo types we should discuss some differences here. The big one to bring up is <strong>Effective Range</strong> which is how far a headshot will count as an instant kill. If we look at the distribution this looks pretty decent.</p>
<div id="cell-21" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>sns.violinplot(mediums, x<span class="op">=</span><span class="st">'Effective Range'</span>, color<span class="op">=</span><span class="st">'seagreen'</span>).set_title(<span class="st">"Medium Slot Effective Range Distribution"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2024-02-14-exploring-medium-slot-guns-in-hunt_files/figure-html/cell-13-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-22" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ss">f"The Mean Muzzle Velocity of Medium Slot guns is </span><span class="sc">{</span><span class="bu">round</span>( mediums[<span class="st">'Effective Range'</span>].mean())<span class="sc">}</span><span class="ss">. The Median Muzzle Velocity of Medium Slot guns is </span><span class="sc">{</span><span class="bu">round</span>( mediums[<span class="st">'Effective Range'</span>].median())<span class="sc">}</span><span class="ss">."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>'The Mean Muzzle Velocity of Medium Slot guns is 139. The Median Muzzle Velocity of Medium Slot guns is 141.'</code></pre>
</div>
</div>
<p>Those two numbers are surprisingly close: good work Crytek! So, what weapons/bullets would we take if we wanted something above average?</p>
<div id="cell-24" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Spitzer &gt; Long &gt; FMJ | Medium &gt; UpperMat and UpperCut P</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>mediums<span class="op">\</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    .loc[ mediums[<span class="st">'Effective Range'</span>] <span class="op">&gt;</span> <span class="dv">140</span>]<span class="op">\</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    [[<span class="st">'Weapon'</span>, <span class="st">'Type'</span>, <span class="st">'Effective Range'</span>, <span class="st">'Cost'</span>]]<span class="op">\</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    .drop_duplicates()<span class="op">\</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">'Effective Range'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Weapon</th>
<th data-quarto-table-cell-role="th">Type</th>
<th data-quarto-table-cell-role="th">Effective Range</th>
<th data-quarto-table-cell-role="th">Cost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">87</td>
<td>Mosin-Nagant N1891 Obrez</td>
<td>Spitzer</td>
<td>325.0</td>
<td>440.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">90</td>
<td>Mosin-Nagant N1891 Obrez Drum</td>
<td>Spitzer</td>
<td>325.0</td>
<td>500.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">85</td>
<td>Mosin-Nagant N1891 Obrez</td>
<td>Long</td>
<td>314.0</td>
<td>290.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">86</td>
<td>Mosin-Nagant N1891 Obrez</td>
<td>Incendiary, Long</td>
<td>314.0</td>
<td>320.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">88</td>
<td>Mosin-Nagant N1891 Obrez Drum</td>
<td>Long</td>
<td>314.0</td>
<td>350.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">89</td>
<td>Mosin-Nagant N1891 Obrez Drum</td>
<td>Incendiary, Long</td>
<td>314.0</td>
<td>380.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">147</td>
<td>Winfield M1876 Centennial Shorty</td>
<td>Full Metal Jacket</td>
<td>210.0</td>
<td>153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">117</td>
<td>Springfield 1866 Compact</td>
<td>Springfield Dum Dum</td>
<td>204.0</td>
<td>58.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">124</td>
<td>Springfield 1866 Compact Deadeye</td>
<td>Medium</td>
<td>204.0</td>
<td>46.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">118</td>
<td>Springfield 1866 Compact</td>
<td>SpringField Explosive</td>
<td>204.0</td>
<td>78.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">116</td>
<td>Springfield 1866 Compact</td>
<td>Medium</td>
<td>204.0</td>
<td>33.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">125</td>
<td>Springfield 1866 Compact Deadeye</td>
<td>Springfield Dum Dum</td>
<td>204.0</td>
<td>71.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">127</td>
<td>Springfield 1866 Compact Deadeye</td>
<td>Springfield Poison</td>
<td>204.0</td>
<td>71.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">123</td>
<td>Springfield 1866 Compact Striker</td>
<td>Springfield Poison</td>
<td>204.0</td>
<td>81.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">119</td>
<td>Springfield 1866 Compact</td>
<td>Springfield Poison</td>
<td>204.0</td>
<td>58.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">120</td>
<td>Springfield 1866 Compact Striker</td>
<td>Medium</td>
<td>204.0</td>
<td>56.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">121</td>
<td>Springfield 1866 Compact Striker</td>
<td>Springfield Dum Dum</td>
<td>204.0</td>
<td>81.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">144</td>
<td>Winfield M1873C Vandal Deadeye</td>
<td>Full Metal Jacket</td>
<td>178.0</td>
<td>95.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">140</td>
<td>Winfield M1873C Vandal Striker</td>
<td>Full Metal Jacket</td>
<td>178.0</td>
<td>89.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">136</td>
<td>Winfield M1873C Vandal</td>
<td>Full Metal Jacket</td>
<td>178.0</td>
<td>85.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">145</td>
<td>Winfield M1876 Centennial Shorty</td>
<td>Medium</td>
<td>170.0</td>
<td>103.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">146</td>
<td>Winfield M1876 Centennial Shorty</td>
<td>Poison</td>
<td>170.0</td>
<td>153.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">137</td>
<td>Winfield M1873C Vandal Striker</td>
<td>Compact</td>
<td>141.0</td>
<td>39.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">138</td>
<td>Winfield M1873C Vandal Striker</td>
<td>Incendiary</td>
<td>141.0</td>
<td>79.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">135</td>
<td>Winfield M1873C Vandal</td>
<td>High Velocity</td>
<td>141.0</td>
<td>65.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">134</td>
<td>Winfield M1873C Vandal</td>
<td>Incendiary</td>
<td>141.0</td>
<td>65.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">141</td>
<td>Winfield M1873C Vandal Deadeye</td>
<td>Compact</td>
<td>141.0</td>
<td>45.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">142</td>
<td>Winfield M1873C Vandal Deadeye</td>
<td>Incendiary</td>
<td>141.0</td>
<td>85.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">143</td>
<td>Winfield M1873C Vandal Deadeye</td>
<td>High Velocity</td>
<td>141.0</td>
<td>105.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">133</td>
<td>Winfield M1873C Vandal</td>
<td>Compact</td>
<td>141.0</td>
<td>35.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">139</td>
<td>Winfield M1873C Vandal Striker</td>
<td>High Velocity</td>
<td>141.0</td>
<td>99.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>And, there are the choices!</p>
</section>
<section id="skipping-the-modeling" class="level3">
<h3 class="anchored" data-anchor-id="skipping-the-modeling">Skipping the Modeling</h3>
<p>In the previous post, I made some attempts to model out the small category weapons with the hunch that there was no functional model. And, my hunch was correct as it turned out that there were lots of problems trying to do this. Therefore, I have skipped this section and will come back around to solving that problem at the end. Once the large weapons have been analyzed, I am going to attempt to take a shot at trying to adjust the prices of all the weapons in the game.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>